(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5858:(e,t,r)=>{Promise.resolve().then(r.bind(r,6856))},6856:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(5155),a=r(2115);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:"rounded-lg border bg-card text-card-foreground shadow-sm",...a})});n.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:"p-6 pt-0",...a})});l.displayName="CardContent";var i=r(2317);let o=a.forwardRef((e,t)=>{let{className:r,asChild:a=!1,...n}=e,l=a?i.DX:"button";return(0,s.jsx)(l,{ref:t,className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90",...n})});o.displayName="Button";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:"relative w-full rounded-lg border p-4",...a})});d.displayName="Alert";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:"text-sm [&_p]:leading-relaxed",...a})});c.displayName="AlertDescription";var u=r(1125);let m=u.bL,f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(u.B8,{ref:t,className:"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",...a})});f.displayName=u.B8.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(u.l9,{ref:t,className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",...a})});p.displayName=u.l9.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(u.UC,{ref:t,className:"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",...a})}).displayName=u.UC.displayName;var g=r(6566);g.bL,g.l9,a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)(g.ZL,{children:[(0,s.jsx)(g.hJ,{className:"fixed inset-0 z-50 bg-black/50"}),(0,s.jsx)(g.UC,{ref:t,className:"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 sm:rounded-lg",...n,children:a})]})}).displayName=g.UC.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(g.hE,{ref:t,className:"text-lg font-semibold leading-none tracking-tight",...a})}).displayName=g.hE.displayName;let x=()=>{let[e,t]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[u,g]=(0,a.useState)([]),[x,h]=(0,a.useState)("all"),[b,y]=(0,a.useState)(!1),[N,j]=(0,a.useState)([]),[v,w]=(0,a.useState)(!1),[k,C]=(0,a.useState)(""),S=e=>{let t=[],r=new Set,s=new Set,a=new Set,n=new Set;return e.split("，").forEach((e,l)=>{if(!e.trim())return;let i=e.split("-");if(2!==i.length){t.push("第".concat(l+1,"组映射格式错误：").concat(e));return}let[o,d]=i.map(e=>e.trim());if(!o||!d){t.push("第".concat(l+1,"组映射存在空值：").concat(e));return}if(!/^\d+$/.test(o)){t.push("第".concat(l+1,"组映射的标号不是有效数字：").concat(o));return}r.has(o)&&a.add(o),r.add(o),s.has(d)&&n.add(d),s.add(d)}),a.size>0&&t.push("发现重复的标号：".concat(Array.from(a).join(", "))),n.size>0&&t.push("发现重复的特征词：".concat(Array.from(n).join(", "))),t};(0,a.useEffect)(()=>{e.trim()?j(S(e)):j([])},[e]);let E=e=>{let t={},r={},s=new Set;return e.split("，").forEach(e=>{let[a,n]=e.split("-").map(e=>e.trim());a&&n&&(t[n]=a,r[a]=n,n.startsWith("第")&&s.add(n))}),{featureToNumber:t,numberToFeature:r,prefixFeatures:s}},R=(e,t,r)=>{let s=[];return Array.from(r).concat(Object.keys(t).filter(e=>!r.has(e))).sort((e,t)=>t.length-e.length).forEach(r=>{let a;let n=RegExp("".concat(r,"\\s*\\d+"),"g");for(;null!==(a=n.exec(e));){let n=a[0],l=n.match(/\d+/)[0],i=t[r];l!==i&&s.push({type:"feature",feature:r,foundNumber:l,expectedNumber:i,context:"...".concat(e.slice(Math.max(0,a.index-20),a.index+n.length+20),"..."),position:a.index,message:'特征词"'.concat(r,'"使用了错误的标号"').concat(l,'"，应使用"').concat(i,'"'),replacement:"".concat(r).concat(i)})}}),s},_=(e,t)=>{let r;let s=[],a=RegExp("(?<![.\\d])\\d+(?!\\d)","g");for(;null!==(r=a.exec(e));){let a=r[0];if(!t[a]){let n=Object.keys(t).filter(e=>e.startsWith(a)&&e!==a);n.length>0?s.push({type:"incomplete",number:a,possibleNumbers:n,context:"...".concat(e.slice(Math.max(0,r.index-20),r.index+a.length+20),"..."),position:r.index,message:'可能使用了不完整标号"'.concat(a,'"，完整标号可能是: ').concat(n.join(", ")),suggestions:n}):s.push({type:"undefined",number:a,context:"...".concat(e.slice(Math.max(0,r.index-20),r.index+a.length+20),"..."),position:r.index,message:'使用了未定义的标号"'.concat(a,'"')})}}return s},z=e=>{switch(e){case"feature":return"bg-yellow-50 border-yellow-200";case"incomplete":return"bg-orange-50 border-orange-200";case"undefined":return"bg-red-50 border-red-200";default:return""}},A=u.filter(e=>"all"===x||e.type===x);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(n,{className:"border-gray-200 shadow-lg hover:shadow-xl transition-shadow duration-300",children:(0,s.jsxs)(l,{className:"p-8 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-lg font-medium text-gray-700",children:"技术特征-标号对应关系"}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)("textarea",{className:"w-full h-32 p-4 border rounded-lg resize-none transition-all\n                  focus:ring-2 focus:ring-blue-500 focus:outline-none\n                  ".concat(N.length>0?"border-red-300":"border-gray-300"),value:e,onChange:e=>t(e.target.value),placeholder:"示例：100-底盘，110-第一腔体..."})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-lg font-medium text-gray-700",children:"需要审核的专利文本"}),(0,s.jsx)("textarea",{className:"w-full h-48 p-4 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:outline-none transition-all",value:r,onChange:e=>i(e.target.value),placeholder:"在此输入需要审核的专利文本..."})]}),(0,s.jsxs)("div",{className:"flex gap-4 pt-2",children:[(0,s.jsx)(o,{onClick:()=>{if(!r.trim()||!e.trim()||N.length>0){g([]),y(!0);return}let{featureToNumber:t,numberToFeature:s,prefixFeatures:a}=E(e);g([...R(r,t,a),..._(r,s)].sort((e,t)=>e.position-t.position).filter((e,t,r)=>{if(0===t)return!0;let s=r[t-1];return Math.abs(e.position-s.position)>20||e.type!==s.type})),y(!0)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!r.trim()||!e.trim()||N.length>0,children:"开始审核"}),u.length>0&&(0,s.jsx)(o,{onClick:()=>{let e=r,t=[];return[...u].sort((e,t)=>t.position-e.position).forEach(r=>{if("feature"===r.type&&r.replacement){let s=e.slice(0,r.position),a=e.slice(r.position+r.feature.length+r.foundNumber.length);e=s+r.replacement+a,t.push('将"'.concat(r.feature).concat(r.foundNumber,'"修正为"').concat(r.replacement,'"'))}}),C(e),w(!0),t},variant:"outline",className:"flex-1 border-2 border-blue-600 text-blue-600 hover:bg-blue-50 font-medium py-3 rounded-lg",children:"自动修正"})]})]})}),b&&(0,s.jsx)("div",{className:"space-y-4 animate-fadeIn",children:u.length>0?(0,s.jsx)(n,{className:"border-gray-200 shadow-md",children:(0,s.jsx)(l,{className:"p-6",children:(0,s.jsxs)(m,{value:x,onValueChange:h,children:[(0,s.jsxs)(f,{className:"bg-gray-100 p-1 rounded-lg mb-4",children:[(0,s.jsxs)(p,{value:"all",className:"px-4 py-2 rounded-md",children:["全部问题 (",u.length,")"]}),(0,s.jsxs)(p,{value:"feature",className:"px-4 py-2 rounded-md",children:["特征词 (",u.filter(e=>"feature"===e.type).length,")"]}),(0,s.jsxs)(p,{value:"incomplete",className:"px-4 py-2 rounded-md",children:["不完整标号 (",u.filter(e=>"incomplete"===e.type).length,")"]}),(0,s.jsxs)(p,{value:"undefined",className:"px-4 py-2 rounded-md",children:["未定义标号 (",u.filter(e=>"undefined"===e.type).length,")"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:A.map((e,t)=>(0,s.jsx)(d,{className:"".concat(z(e.type)," rounded-lg border-l-4"),children:(0,s.jsxs)(c,{children:[(0,s.jsx)("div",{className:"font-medium",children:e.message}),(0,s.jsx)("div",{className:"mt-2 text-sm bg-white/50 p-3 rounded",children:e.context})]})},t))})]})})}):(0,s.jsx)(d,{className:"bg-green-50 border-green-200 text-green-800",children:(0,s.jsxs)(c,{children:[(0,s.jsx)("div",{className:"font-medium",children:"检查完成"}),(0,s.jsx)("p",{children:"未发现明显的标号使用错误"})]})})})]})};function h(){return(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl mx-auto p-6",children:[(0,s.jsxs)("div",{className:"text-center space-y-3 mb-8 pt-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"专利标号检查工具"}),(0,s.jsx)("p",{className:"text-gray-600",children:"快速检查和修正专利文本中的标号使用问题"})]}),(0,s.jsx)(x,{}),(0,s.jsx)("footer",{className:"mt-12 text-center text-gray-500 text-sm",children:(0,s.jsx)("p",{children:"\xa9 2024 专利标号检查工具"})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[22,441,517,358],()=>t(5858)),_N_E=e.O()}]);